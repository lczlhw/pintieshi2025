<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <!--手机自适应大小 -->
    <meta
      name="viewport"
      content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <title>拾零成诗</title>
    <link href="css/测试.css" rel="stylesheet" type="text/css" />
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <!-- <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <!-- <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script> -->
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <!-- <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
  </head>

  <body>
    <!--	<div id="QHSJ" :style="{ height: windowHeight + 'px' }">-->
    <!--	<img src="2寸.png"  v-viewer>-->

    <div id="QHSJ" :style="{ height: windowHeight}" ref="fullPage" v-cloak>
      <div class="fullPageContainer" ref="fullPageContainer">
        <!--			第一页-->
        <div class="p_one" :style="{width:windowWidth,height:windowHeight} ">
          <audio
            src="./audio/BGM.mp3"
            type="audio/mpeg"
            id="audios"
            loop
          ></audio>
          <!--
				<audio  loop="loop" autoplay="autoplay" id="musicAudio" >
     				 <source src="http://xuexiziliaoceshi.oss-cn-hangzhou.aliyuncs.com/bgm.MP3" type="audio/mpeg"/>
				</audio>
-->
          <!-- 170标志 -->
          <img
            src="./img/title/author.png"
            style="margin-top: 30px; width: 163px"
          />
          <!-- 标题 -->
          <img
            src="./img/title/title.png"
            style="margin-top: 25%; width: 75%"
          />
          <!-- 按钮 -->
          <img
            src="./img/ui/start.png"
            @click="next()"
            style="width: 35%; top: 15%; position: relative"
          />
        </div>

        <!--			第2页-->
        <div class="p_two" :style="{width:windowWidth,height:windowHeight}">
          <div class="userbox">
            <div class="boxlist">
              <div class="usertitle">基本信息填写</div>
              <div style="margin-top: 40px">
                <div class="userthing">
                  <div class="userleft">
                    <span style="color: red">*</span>
                    <span>年级</span>
                  </div>
                  <div>
                    <select
                      class="userbutton"
                      style="width: 195px"
                      v-model="inputList.user_in"
                    >
                      <option selected disabled hidden>请选择年级</option>
                      <option v-for="(item,index) in user_in">{{item}}</option>
                    </select>
                  </div>
                </div>
                <div class="userthing">
                  <div class="userleft">
                    <span style="color: red">*</span>
                    <span>班级</span>
                  </div>
                  <div>
                    <select
                      class="userbutton"
                      style="width: 195px"
                      v-model="inputList.overyear"
                    >
                      <option selected disabled hidden>请选择班级</option>
                      <option v-for="(item,index) in overyear">{{item}}</option>
                    </select>
                  </div>
                </div>

                <div class="userthing">
                  <div class="userleft">
                    <span style="color: red">*</span>
                    姓名/昵称
                  </div>
                  <input
                    maxlength="10"
                    class="userbutton"
                    type="text"
                    placeholder="请输入姓名"
                    v-model="inputList.name"
                  />
                </div>
              </div>
              <div
                class="into"
                @click="GoToUser()"
                :style="{opacity:input_warnning == '立即提交' && inputList.name !='' ? '1' :'0.45'}"
              >
                {{input_warnning}}
              </div>
              <!--						<button  @click="next()">完成</button>-->
            </div>
          </div>
          <div style="text-align: center; width: 100%">
            <img style="width: 163px" src="./img/title/author.png" />
          </div>
        </div>

        <!--			第4页-->
        <div class="p_four" :style="chooseBgStyle">
          <div class="banner">福州八中学生会特别企划</div>
          <div class="logo_title">
            <img src="./img/title/title_long.png" style="width: 77%" />
          </div>
          <div class="imgbox">
            <div
              style="
                display: flex;
                flex-wrap: wrap;
                align-content: space-between;
                margin: 0px 35px 0 20px;
              "
            >
              <template v-for="(line, l_index) in chooseList[choosePage]">
                <div
                  v-for="(item, index) in line"
                  class="item"
                  :style="item.style"
                  @click="choose(item, choosePage, l_index, index)"
                >
                  <div
                    class="circle"
                    v-if="poemList[currentLine].items.lastIndexOf(item) !== -1"
                  >
                    {{poemList[currentLine].items.lastIndexOf(item) + 1}}
                  </div>

                  <div class="str">{{item.str}}</div>
                </div>
              </template>
            </div>
          </div>

          <div :style="{top:choose_botton_top}" style="position: fixed">
            <div class="choose_botton">
              <div class="shang" @click="uplist()">
                <img
                  src="./img/ui/up.png"
                  :style="{opacity:choosePage !== 0 ? '1' :'0.7'}"
                />
              </div>
              <div class="xia" @click="downlist()">
                <img
                  src="./img/ui/down.png"
                  :style="{opacity:choosePage !== chooseList.length-1 ? '1' :'0.7'}"
                />
              </div>
              <div class="line" style="position: relative">
                <img src="./img/ui/btnbg.png" />
                <select v-model="currentLine">
                  <option v-for="i in 8" :value="i-1">第{{i}}行</option>
                </select>
              </div>
              <div class="clean" @click="clean()">
                <img
                  src="./img/ui/clear.png"
                  :style="{opacity:poemList[currentLine].len !== 0 ? '1' :'0.7'}"
                />
              </div>
            </div>

            <div style="margin-left: 25px; margin-top: 2px" @click="doimg()">
              <img
                src="./img/ui/build.png"
                style="max-width: 326px"
                :style="{opacity:isPoemed ? '1' :'0.7'}"
              />
            </div>
            <div class="advice">一行最多八个字，最多八行</div>
          </div>
          <div class="shupai" :style="{top:shupai_top}">
            词块由学生会生活部提供
          </div>
          <span class="full" :style="{top:warnning_top}" v-show="Iffull==1"
            >版面有限,请换行</span
          >
        </div>

        <!--		拼贴页面-->
        <div>
          <img
            crossorigin="anonymous"
            :src="pt_bg_url"
            :style="{height:windowHeight,top:noreal_bg_top}"
            class="real_bg"
          />
          <div
            class="pt_bg"
            style="padding: 0 4%"
            :style="{height:windowHeight }"
          >
            <div class="banner">福州八中学生会特别企划</div>
            <div class="titleimg">
              <img src="./img/title/title_long.png" style="width: 77%" />
            </div>

            <div class="book">
              <div
                class="bookpos"
                style="display: flex"
                v-for="line in poemList"
              >
                <div
                  v-for="(item, index) in line.items"
                  class="item"
                  :style="item.style"
                >
                  <div class="str">{{item.str}}</div>
                </div>
              </div>
              <div
                class="bookpos"
                style="text-shadow: 2px 3px 6px rgba(0, 0, 0, 0.62)"
              >
                <div class="book_test">
                  by {{inputList.name}}
                  <span v-show="inputList.user_in != '不显示年级' "
                    >({{inputList.user_in}}{{inputList.overyear != '不显示班级'?
                    inputList.overyear: ''}})</span
                  >
                </div>
                <!-- <div
                  class="book_test"
                  v-show="inputList.place!=''"
                  style="
                    display: flex;
                    justify-content: end;
                    align-items: center;
                  "
                >
                  <img
                    src="http://xuexiziliaoceshi.oss-cn-hangzhou.aliyuncs.com/img/icon.png"
                    style="height: 15px; margin-right: 5px"
                  />
                  {{inputList.place}}
                </div> -->
              </div>
            </div>
          </div>

          <div
            style="top: 3380px; position: fixed; left: 0px; right: 0px"
            :style="{top:under_top}"
          >
            <div class="under">
              <div class="again" v-show="botton_show==0" @click="pre()">
                <img src="./img/ui/restart.png" style="width: 100px" />
              </div>
              <!--						<div class="save" v-show="Screenimg ==''" @click="handleScreenshot()"><img src="https://xuexiziliaoceshi.oss-cn-hangzhou.aliyuncs.com/img/%E4%BF%9D%E5%AD%98%E5%88%86%E4%BA%AB.png" style="width: 100px"></div>-->
              <div class="save" v-show="botton_show==0" @click="handleScreenshot()">
                <img src="./img/ui/over.png" style="width: 100px" />
              </div>
              <div class="change" v-show="botton_show==0" @click="getbg()">
                <img src="./img/ui/change.png" style="width: 100px" />
              </div>
            </div>
          </div>

          <div
            class="save_warn"
            :style="{top:save_top}"
            v-show="Screenimg != ''"
          >
            『长按』可将海报保存至相册
          </div>
          <img
            class="Screenimg"
            :src="Screenimg"
            alt="截图"
            :style="{width:windowWidth , top:Screenimg_top}"
            v-show="Screenimg !=''"
          />
        </div>

        <!--		实际的截图页面-->
        <div ref="faultTree">
          <img
            crossorigin="anonymous"
            :src="pt_bg_url"
            :style="{height:windowHeight,top:real_bg_top}"
            class="real_bg"
          />
          <div
            class="pt_bg"
            style="padding: 0 4%"
            :style="{height:windowHeight }"
          >
            <div class="banner">福州八中学生会特别企划</div>
            <div class="titleimg">
              <img src="./img/title/title_long.png" style="width: 77%" />
            </div>

            <div class="book">
              <div
                class="bookpos"
                style="display: flex"
                v-for="line in poemList"
              >
                <div
                  v-for="(item, index) in line.items"
                  class="item"
                  :style="item.style"
                >
                  <div class="str">{{item.str}}</div>
                </div>
              </div>
              <div
                class="bookpos"
                style="text-shadow: 2px 3px 6px rgba(0, 0, 0, 0.62)"
              >
                <div class="book_test">
                  by {{inputList.name}}
                  <span v-show="inputList.user_in != '不显示年级' "
                    >({{inputList.user_in}}{{inputList.overyear != '不显示班级'?
                    inputList.overyear: ''}})</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="js/items/item.js"></script>
    <script src="js/vue.js"></script>
    <script src="js/测试.js"></script>
    <script src="js/html2canvas.min.js"></script>
    <!--
	<script>
	var isAndroid = navigator.userAgent.indexOf('Android') > -1 || navigator.userAgent.indexOf('Adr') > -1; // 安卓（android）为true
		
		if(isAndroid ==true){
	window.AudioContext = window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext;
var context = new window.AudioContext();
var source = null;
var audioBuffer = null;
//最好使用本地音频文件，无跨域问题
function playSound() {
	source = context.createBufferSource();//获取音频数据
	source.buffer = audioBuffer;
	source.connect(context.destination);
	source.start(); //立即播放
	source.loop = true
}
function initSound(arrayBuffer) {
	context.decodeAudioData(arrayBuffer, function (buffer) { //解码成功时的回调函数
		audioBuffer = buffer;
		playSound();
	}, function (e) { //解码出错时的回调函数
		console.log('Error decoding file', e);
	});
}
function loadAudioFile(url) {
	var xhr = new XMLHttpRequest(); //通过XHR下载音频文件
	xhr.open('GET', url, true);
	xhr.responseType = 'arraybuffer';
	xhr.onload = function (e) { //下载完成
		initSound(this.response);
		console.log(111)
	};
	xhr.send();
}
loadAudioFile('http://xuexiziliaoceshi.oss-cn-hangzhou.aliyuncs.com/bgm.MP3')
}
	
	</script>
-->
  </body>
</html>
